<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>esri JSAPI Class: WorkerClient</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.spacelab.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top navbar-inverse">
		<div class="navbar-inner">
			<a class="brand" href="index.html">esri JSAPI</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="esri.process.SpatialIndex.html">Index</a>
						</li>
						
						<li>
							<a href="esri.process.Processor.html">Processor</a>
						</li>
						
						<li>
							<a href="esri.workers.RequestClient.html">RequestClient</a>
						</li>
						
						<li>
							<a href="esri.workers.WorkerClient.html">WorkerClient</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="mixins.list.html" class="dropdown-toggle" data-toggle="dropdown">Mixins<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="esri.plugins.spatialIndex.html">spatialIndex</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="global.html" class="dropdown-toggle" data-toggle="dropdown">Global<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#deserialize">deserialize</a>
						</li>
						
						<li>
							<a href="global.html#insert">insert</a>
						</li>
						
						<li>
							<a href="global.html#remove">remove</a>
						</li>
						
						<li>
							<a href="global.html#search">search</a>
						</li>
						
						<li>
							<a href="global.html#serialize">serialize</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
		<div class="span8">
			
				<div id="main">
					


	<h1 class="page-title">Class: WorkerClient</h1>
<section>

<header>
    <h2>
    WorkerClient
    </h2>
    
</header>

<article>
    <div class="container-overview">
    

    
        
<dt>
    <h4 class="name" id="WorkerClient"><span class="type-signature"></span>new WorkerClient<span class="signature">(path, <span class="optional">deferreds</span>)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>The WorkerClient is the primary entry point for interfacing with background Workers. You can use any valid and
accessible worker script file. See <a href="esri.workers.WorkerClient.html#importScripts">importScripts</a> for limitations on
what can be used and assumed in a worker script.</p>
<p>Additionally, the worker script should expect messages to contain a <code>msgId</code> property and responses from that
worker should contain the <code>msgId</code> of the message that they are responding to.</p>
<p>If you want the the <a href="esri.workers.WorkerClient.html#addWorkerCallback">addWorkerCallback</a> or 
<a href="esri.workers.WorkerClient.html#importScripts">importScripts</a> functions to work, then workers used 
here should use &quot;esri/workers/mutableWorker&quot; as the worker and build it up via
this class's methods.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		
		<th>Argument</th>
		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>A require style string path to the worker script.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>deferreds</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>return Deferreds rather than Promises from methods</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

    
    </div>

    

    

    

    

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<dt>
    <h4 class="name" id="returnDeferreds"><span class="type-signature"></span>returnDeferreds<span class="type-signature"> :Boolean</span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        <p>Return Deferreds rather than Promises from <a href="esri.workers.WorkerClient.html#postMessage">postMessage</a></p>
    </div>
    
    
    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">Boolean</span>


            </li>
        </ul>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    
</dd>

        
            
<dt>
    <h4 class="name" id="worker"><span class="type-signature"></span>worker<span class="type-signature"> :Worker</span></h4>
    
    
</dt>
<dd>
    
    <div class="description">
        <p>Reference to the actual HTML5 Worker instance</p>
    </div>
    
    
    
        <h5>Type:</h5>
        <ul>
            <li>
                
<span class="param-type">Worker</span>


            </li>
        </ul>
    

    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    
</dd>

        </dl>
    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
            
<dt>
    <h4 class="name" id="addWorkerCallback"><span class="type-signature"></span>addWorkerCallback<span class="signature">(module, <span class="optional">name</span>)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Adds a function to the worker that takes the worker's internal calls to <code>postMessage</code> and calls this function before
sending the original message back to the main thread. The function takes the same inputs as 
<a href="esri.workers.WorkerClient.html#postMessage">postMessage</a>. The function should act on these inputs. This obviously assumes some
familiarity with the type of messages that a worker is passing. The function should be able to correctly interogate
the message to determine if it is an appropiate message to act on. Additional calls to <code>addWorkerCallback</code> can be used
to chain functions together in a &quot;last in, first executed&quot; fashion.</p>
<p>The script file whose path is passed in will be imported into the worker directly. It will not pass through the main
thread and can not expect to have access to any objects in the main thread. This script is not required to have a
<code>message</code> event handler or even <code>postMessage</code> calls back to the main thread. However, it must conform to the same
limitations listed for <a href="esri.workers.WorkerClient.html#importScripts">importScripts</a>. By default, the script should provide a function
named <code>main</code>. If not then you must indicate the function via the <code>name</code> parameter. This function will be exectued each
time that the worker attempts to <code>postMessage</code> back to the main thread.</p>
<p><strong>NOTE</strong> If a callback or any callback in a series of chained callbacks returns <code>false</code> then <code>postMessage</code> is <strong><em>never</em></strong>
executed, thus <strong>preventing the main UI thread from recieving the message.</strong></p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		
		<th>Argument</th>
		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>module</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>a require path to a worker-compatible script containing the callback function.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>the name of the callback function. Defaults to &quot;main&quot;. Does not need to be unique as it
  will be enclosured.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>Promise resolves if addition was successful and rejects with error</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">Promise</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="importScripts"><span class="type-signature"></span>importScripts<span class="signature">(paths)</span><span class="type-signature"> &rarr; {Promise}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Import any script or function into the worker. Please note the following conditions:</p>
<ul>
<li>Script(s) / function(s) can ONLY include objects, classes, or methods available to 
 <a href="https://developer.mozilla.org/En/DOM/Worker/Functions_available_to_workers">Workers</a>, plus whatever else
 has already been imported.</li>
<li>The imported items will be executed immediately and in the same order they are specified</li>
<li>The imported script won't be able to share or directly access any objects in the main thread or other workers</li>
<li>The worker can't access the DOM and thus can't use libraries which assume a browser environment</li>
</ul>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>paths</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>An AMD <code>require</code> path to a script file to import. 
  Multiple items may be passed in an Array.</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            
<div class="param-desc">
    <p>The promise resolves if the import was succesful and rejects if an error was encountered.</p>
</div>



<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">Promise</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="postMessage"><span class="type-signature"></span>postMessage<span class="signature">(msg, <span class="optional">transfers</span>)</span><span class="type-signature"> &rarr; {dojo.promise.Promise}</span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Post a message to the worker</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		
		<th>Argument</th>
		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>msg</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>
|

<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last"><p>The data to post to the worker. If it is an array or a primitive,
 it will be put in an object as the 'data' member before being posted to the worker.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>transfers</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last"><p>An optional array of transferable objects</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    <h5>Returns:</h5>
    
            


<dl>
	<dt>
		Type
	</dt>
	<dd>
		
<span class="param-type">dojo.promise.Promise</span>


	</dd>
</dl>


        
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="setWorker"><span class="type-signature"></span>setWorker<span class="signature">(paths, path)</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Sets the worker that is used in the Worker Client. Please note the following conditions:</p>
<ul>
<li>Script(s) / function(s) can ONLY include objects, classes, or methods available to 
 <a href="https://developer.mozilla.org/En/DOM/Worker/Functions_available_to_workers">Workers</a>, plus whatever else
 has already been imported.</li>
<li>The imported items will be executed immediately and in the same order they are specified</li>
<li>The imported script won't be able to share or directly access any objects in the main thread or other workers</li>
<li>The worker can't access the DOM and thus can't use libraries which assume a browser environment</li>
</ul>
<p>Generally, it is better to use the worker provided by 'esri/workers/mutableWorker', and use
<code>importScript</code> to bring in other worker scripts and functions.</p>
    </div>
    

    
    
    
    
    
        <h5>Parameters:</h5>
        

<table class="params table table-striped">
    <thead>
	<tr>
		
		<th>Name</th>
		

		<th>Type</th>

		

		

		<th class="last">Description</th>
	</tr>
	</thead>

	<tbody>
	

        <tr>
            
                <td class="name"><code>paths</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>
|

<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>An AMD <code>require</code> path to a script file to import.</p></td>
        </tr>

	

        <tr>
            
                <td class="name"><code>path</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last"><p>A require style string path to the worker script</p></td>
        </tr>

	
	</tbody>
</table>

    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        
            
<dt>
    <h4 class="name" id="terminate"><span class="type-signature"></span>terminate<span class="signature">()</span><span class="type-signature"></span></h4>
    
    
</dt>
<dd>
    
    
    <div class="description">
        <p>Terminates the worker and cancels all unresolved messages</p>
    </div>
    

    
    
    
    
    
    
    
<dl class="details">
    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        workers/WorkerClient.js
    </li></ul></dd>
    

    

    

    
</dl>

    
    

    

    
    
    
    
    
    
    
</dd>

        </dl>
    

    

    
</article>

</section>




				</div>

				<div class="clearfix"></div>
				<footer>
					
					
		<span class="copyright">
		Esri Javascript API Copyright © 2007-2014 Esri
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-dev</a>
		on Mon Mar 17 2014 18:07:58 GMT-0500 (CDT) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<div class="span3">
				<div id="toc"></div>
			</div>
			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:false,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
			    anchorName  : function(i, heading, prefix) {
					return $(heading).attr("id") || ( prefix + i );
				},
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>